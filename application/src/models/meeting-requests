import mongoose, {Schema, models} from "mongoose";

const meetingRequestsSchema = new Schema({
    // Owner of the requests
    userId: { type: mongoose.Schema.Types.ObjectId, ref: "User"},
    // Array of requests
    incomingRequests: [
        {
            // Meeting location ID
            senderId: {
                type: mongoose.Schema.Types.ObjectId,
                ref: "User", // Reference to the User model
            id : false, // prevent mongoose from creating a sub id

            },
            meetingId:{
                type: mongoose.Schema.Types.ObjectId,
                ref: "Meeting", // Reference to the Meeting model
            _id : false, // prevent mongoose from creating a sub id

            },
            message: {
                type: String,
                default: "",
                maxLength: 500,
            },
            // Created at timestamp
            createdAt: {
                type: Date,
                default: Date.now,
            },
        },
    ],
    outgoingRequests: [
        {
            // Meeting location ID
            reciepientId: {
                type: mongoose.Schema.Types.ObjectId,
                ref: "User", // Reference to the User model
            _id : false, // prevent mongoose from creating a sub id

            },
            meetingId:{
                type: mongoose.Schema.Types.ObjectId,
                ref: "Meeting", // Reference to the Meeting model
            _id : false, // prevent mongoose from creating a sub id

            },
            message: {
                type: String,
                default: "",
                maxLength: 500,
            },
            // Created at timestamp
            createdAt: {
                type: Date,
                default: Date.now,
            },
        },
    ],
    isFresh : {
        type: Boolean,
        default: false,
    },
    createdAt: {
        type: Date,
        default: Date.now,
      },
      updatedAt: {
        type: Date,
        default: Date.now,
      },
});

const MeetingRequests = models.MeetingRequests || mongoose.model("MeetingRequests", meetingRequestsSchema);
export default MeetingRequests;
